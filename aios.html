<!-- aios.html (Complete, Updated Version) -->
<div id="floating-window" class="floating-window hidden">
    <div class="window-header">
        <div class="window-title">Account Settings</div>
        <button class="close-btn" id="close-aios" aria-label="Close Settings">
            <i class="fas fa-times"></i>
        </button>
    </div>
    <div class="window-content">
        <div class="split-layout">
            <div class="tabs-sidebar">
                <button class="tab-btn active" data-tab="account">
                    <i class="fas fa-cog"></i>
                    <span>Account</span>
                </button>
                <button class="tab-btn" data-tab="about">
                    <i class="fas fa-info-circle"></i>
                    <span>About</span>
                </button>
                <button class="tab-btn" data-tab="support">
                    <i class="fas fa-question-circle"></i>
                    <span>Support</span>
                </button>
            </div>

            <div class="tab-content-area">
                <div class="tab-content active" id="account-tab">
                    <h3 class="tab-heading">Account Settings</h3>
                    
                    <!-- Logged Out State -->
                    <div id="account-logged-out" class="auth-state">
                        <div class="auth-tabs">
                            <button class="auth-tab-btn active" data-auth-tab="login">Login</button>
                            <button class="auth-tab-btn" data-auth-tab="signup">Sign Up</button>
                        </div>
                        
                        <!-- Login Form -->
                        <form id="login-form" class="auth-form active">
                            <div class="form-group">
                                <label for="loginEmail">Email</label>
                                <input type="email" id="loginEmail" placeholder="Enter your email" required>
                            </div>
                            <div class="form-group">
                                <label for="loginPassword">Password</label>
                                <input type="password" id="loginPassword" placeholder="Enter your password" required>
                            </div>
                            <div id="login-error" class="auth-error"></div>
                            <div class="form-actions">
                                <button type="submit" class="auth-btn primary">Login</button>
                            </div>
                            
                            <div class="social-auth-divider">OR</div>
                            <div class="social-auth-actions">
                                <button type="button" id="google-signin-btn" class="auth-btn social">
                                    <i class="fab fa-google"></i>
                                    <span>Sign in with Google</span>
                                </button>
                            </div>
                        </form>
                        
                        <!-- Sign Up Form -->
                        <form id="signup-form" class="auth-form">
                            <div class="form-group">
                                <label for="signupName">Name</label>
                                <input type="text" id="signupName" placeholder="Enter your name" required>
                            </div>
                            <div class="form-group">
                                <label for="signupEmail">Email</label>
                                <input type="email" id="signupEmail" placeholder="Enter your email" required>
                            </div>
                            <div class="form-group">
                                <label for="signupPassword">Password</label>
                                <input type="password" id="signupPassword" placeholder="Create a password" required>
                            </div>
                            <div class="form-group">
                                <label for="confirmPassword">Confirm Password</label>
                                <input type="password" id="confirmPassword" placeholder="Confirm your password" required>
                            </div>
                            <div id="signup-error" class="auth-error"></div>
                            <div class="form-actions">
                                <button type="submit" class="auth-btn primary">Sign Up</button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Logged In State -->
                    <div id="account-logged-in" class="auth-state hidden">
                        
                        <!-- NEW: User Identity Card -->
                        <div class="user-identity-card">
                            <div class="user-avatar-container" id="account-avatar">
                                <!-- Avatar img or initials div will be dynamically inserted here -->
                            </div>
                            <div class="user-info">
                                <span class="user-name-display" id="account-userName"></span>
                                <span class="user-email-display" id="account-userEmail"></span>
                            </div>
                            <button class="logout-button" id="logout-btn" title="Log out">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                        </div>
                        <!-- END: User Identity Card -->

                        <!-- Integrations Section -->
                        <div class="integrations-section">
                            <h4 class="section-subheading">Integrations</h4>
                            <!-- GitHub Integration Item -->
                            <div class="integration-item">
                                <div class="integration-info">
                                    <i class="fab fa-github"></i>
                                    <span>GitHub</span>
                                </div>
                                <button class="connect-btn" id="connect-github-btn" data-provider="github" data-action="connect">
                                    <i class="fas fa-link icon-connect"></i>
                                    <i class="fas fa-check icon-connected" style="display: none;"></i>
                                    <span class="btn-text">Connect</span>
                                </button>
                            </div>
                            <!-- Google Integration Item -->
                            <div class="integration-item">
                                <div class="integration-info">
                                    <i class="fab fa-google"></i>
                                    <span>Google</span>
                                </div>
                                <button class="connect-btn" id="connect-google-btn" data-provider="google" data-action="connect">
                                    <i class="fas fa-link icon-connect"></i>
                                    <i class="fas fa-check icon-connected" style="display: none;"></i>
                                    <span class="btn-text">Connect</span>
                                </button>
                            </div>
                            <!-- Vercel Integration Item -->
                            <div class="integration-item">
                                <div class="integration-info">
                                    <svg class="provider-icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M24 22.525H0l12-21.05 12 21.05z"/></svg>
                                    <span>Vercel</span>
                                </div>
                                <button class="connect-btn" id="connect-vercel-btn" data-provider="vercel" data-action="connect">
                                    <i class="fas fa-link icon-connect"></i>
                                    <i class="fas fa-check icon-connected" style="display: none;"></i>
                                    <span class="btn-text">Connect</span>
                                </button>
                            </div>
                            
                            <!-- Supabase Integration Item -->
                            <div class="integration-item">
                                <div class="integration-info">
                                    <svg class="provider-icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.604 3.755c-3.424-3.423-8.97-3.423-12.393 0-3.423 3.423-3.423 8.97 0 12.393l.382.382 5.815-5.815-2.853-2.853a.75.75 0 0 1 1.06-1.06l2.854 2.853 5.815-5.815a8.74 8.74 0 0 0-.28-.385Zm-11.202 1.19a7.25 7.25 0 0 1 10.252 0l-5.126 5.126-5.126-5.126Zm.382 11.202L2.07 10.434a7.25 7.25 0 0 1 0-10.252l5.714 5.714-5.714 5.714Zm11.202.382L12.17 10.434l5.714-5.714a7.25 7.25 0 0 1 0 10.252l-5.714-5.714Z"/></svg>
                                    <span>Supabase</span>
                                </div>
                                <button class="connect-btn" id="connect-supabase-btn" data-provider="supabase" data-action="connect">
                                    <i class="fas fa-link icon-connect"></i>
                                    <i class="fas fa-check icon-connected" style="display: none;"></i>
                                    <span class="btn-text">Connect</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="about-tab">
                    <h3 class="tab-heading">About AIOS Desktop</h3>
                    <div class="about-content">
                        <p class="version">Version 1.0.0</p>
                        <p class="description">
                            A modern desktop application for managing your account and preferences.
                            Built with Electron for optimal performance and user experience.
                        </p>
                        <div class="about-links">
                            <a href="#" class="link" aria-label="Privacy Policy">Privacy Policy</a>
                            <a href="#" class="link" aria-label="Terms of Service">Terms of Service</a>
                            <a href="#" class="link" aria-label="Documentation">Documentation</a>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="support-tab">
                    <h3 class="tab-heading">Support & Feedback</h3>
                    <form id="support-form">
                        <div class="form-group">
                            <label for="subject">Subject</label>
                            <input type="text" id="subject" placeholder="Enter subject" aria-label="Subject">
                        </div>
                        <div class="form-group">
                            <label for="description">Description</label>
                            <textarea id="description" placeholder="Describe your issue or feedback" aria-label="Description"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="screenshot">Upload Screenshot</label>
                            <div class="upload-container">
                                <input type="file" id="screenshot" accept=".jpg,.png,.gif,.txt" aria-label="Upload Screenshot">
                                <p class="file-hint">Supported formats: .jpg, .png, .gif, .txt</p>
                            </div>
                            <div class="screenshot-preview"></div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="submit-btn primary">Submit Feedback</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Style for the new components -->
<style>
    .integration-info .provider-icon {
        width: 1.1em;
        height: 1.1em;
        fill: currentColor;
        vertical-align: middle;
        margin-right: -2px;
    }
    .social-auth-divider {
        text-align: center;
        margin: 16px 0;
        color: var(--text-muted);
        font-size: 0.9em;
        position: relative;
    }
    .social-auth-divider::before,
    .social-auth-divider::after {
        content: '';
        position: absolute;
        top: 50%;
        width: 40%;
        height: 1px;
        background-color: var(--border-color);
    }
    .social-auth-divider::before {
        left: 0;
    }
    .social-auth-divider::after {
        right: 0;
    }
    .social-auth-actions {
        display: flex;
        flex-direction: column;
    }
    .auth-btn.social {
        background-color: var(--background-secondary);
        color: var(--text-color);
        border: 1px solid var(--border-color);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }
    .auth-btn.social:hover {
        background-color: var(--background-tertiary);
    }
    .auth-btn.social .fab {
        font-size: 1.2em;
    }

    /* NEW STYLES FOR USER IDENTITY CARD */
    .user-identity-card {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        background-color: var(--input-bg);
        margin-bottom: 24px;
    }
    .user-avatar-container {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        overflow: hidden;
        background-color: var(--active-bg); /* Fallback color */
        flex-shrink: 0;
    }
    .user-avatar-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .user-info {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }
    .user-name-display {
        font-weight: 600;
        font-size: 1rem;
        color: var(--text-color);
    }
    .user-email-display {
        color: var(--text-secondary);
        font-size: 0.9rem;
    }
    .logout-button {
        background: none;
        border: none;
        color: var(--text-muted);
        cursor: pointer;
        font-size: 1.1rem;
        padding: 8px;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
    }
    .logout-button:hover {
        color: var(--danger-color);
        background-color: var(--danger-hover-bg); /* You may need to define this variable */
    }
</style>